import{I as d,J as h,j as f,K as l,u as g,L as y}from"./CeJ3nYLY.js";import"./DsnmJJEf.js";function M(...i){return i.filter(Boolean).join(" ")}const x=typeof document<"u";let m=0;class T{#t=d(h([]));get toasts(){return f(this.#t)}set toasts(t){l(this.#t,t,!0)}#s=d(h([]));get heights(){return f(this.#s)}set heights(t){l(this.#s,t,!0)}#e=t=>{const s=this.toasts.findIndex(e=>e.id===t);return s===-1?null:s};addToast=t=>{x&&this.toasts.unshift(t)};updateToast=({id:t,data:s,type:e,message:u})=>{const r=this.toasts.findIndex(c=>c.id===t),n=this.toasts[r];this.toasts[r]={...n,...s,id:t,title:u,type:e,updated:!0}};create=t=>{const{message:s,...e}=t,u=typeof t?.id=="number"||t.id&&t.id?.length>0?t.id:m++,r=t.dismissable===void 0?!0:t.dismissable,n=t.type===void 0?"default":t.type;return g(()=>{this.toasts.find(p=>p.id===u)?this.updateToast({id:u,data:t,type:n,message:s,dismissable:r}):this.addToast({...e,id:u,title:s,dismissable:r,type:n})}),u};dismiss=t=>(g(()=>{if(t===void 0){this.toasts=this.toasts.map(e=>({...e,dismiss:!0}));return}const s=this.toasts.findIndex(e=>e.id===t);this.toasts[s]&&(this.toasts[s]={...this.toasts[s],dismiss:!0})}),t);remove=t=>{if(t===void 0){this.toasts=[];return}const s=this.#e(t);if(s!==null)return this.toasts.splice(s,1),t};message=(t,s)=>this.create({...s,type:"default",message:t});error=(t,s)=>this.create({...s,type:"error",message:t});success=(t,s)=>this.create({...s,type:"success",message:t});info=(t,s)=>this.create({...s,type:"info",message:t});warning=(t,s)=>this.create({...s,type:"warning",message:t});loading=(t,s)=>this.create({...s,type:"loading",message:t});promise=(t,s)=>{if(!s)return;let e;s.loading!==void 0&&(e=this.create({...s,promise:t,type:"loading",message:typeof s.loading=="string"?s.loading:s.loading()}));const u=t instanceof Promise?t:t();let r=e!==void 0;return u.then(n=>{if(typeof n=="object"&&n&&"ok"in n&&typeof n.ok=="boolean"&&!n.ok){r=!1;const c=I(n);this.create({id:e,type:"error",message:c})}else if(s.success!==void 0){r=!1;const c=typeof s.success=="function"?s.success(n):s.success;this.create({id:e,type:"success",message:c})}}).catch(n=>{if(s.error!==void 0){r=!1;const c=typeof s.error=="function"?s.error(n):s.error;this.create({id:e,type:"error",message:c})}}).finally(()=>{r&&(this.dismiss(e),e=void 0),s.finally?.()}),e};custom=(t,s)=>{const e=s?.id||m++;return this.create({component:t,id:e,...s}),e};removeHeight=t=>{this.heights=this.heights.filter(s=>s.toastId!==t)};setHeight=t=>{const s=this.#e(t.toastId);if(s===null){this.heights.push(t);return}this.heights[s]=t};reset=()=>{this.toasts=[],this.heights=[]}}function I(i){return i&&typeof i=="object"&&"status"in i?`HTTP error! Status: ${i.status}`:`Error! ${i}`}const o=new T;function b(i,t){return o.create({message:i,...t})}class k{#t=y(()=>o.toasts.filter(t=>!t.dismiss));get toasts(){return f(this.#t)}}const w=b,E=Object.assign(w,{success:o.success,info:o.info,warning:o.warning,error:o.error,custom:o.custom,message:o.message,promise:o.promise,dismiss:o.dismiss,loading:o.loading,getActiveToasts:()=>o.toasts.filter(i=>!i.dismiss)}),S={component:null,props:{}},a=h(S);function H(){return a}function P(i,t={}){a.component=i,a.props=t}function B(){a.component=null,a.props={}}export{k as S,E as a,M as c,H as g,B as h,P as s,o as t};
