import"../chunks/DsnmJJEf.js";import{e as je,u as Ye,r as Ze,k as $e,aD as et,y as tt,w as U,G as L,z as Q,A as q,x as h,B as at,aE as rt,$ as st,D as T,F as z,j as r,L as x,aC as re,aB as be,K as xe}from"../chunks/CeJ3nYLY.js";import{b as ot,e as nt,d as it,f as ct,s as V}from"../chunks/QpH9iBTp.js";import{p as lt,i as R}from"../chunks/DEbK8RlK.js";import{e as se,s as X,i as dt,c as ut}from"../chunks/BwyqBuiR.js";import{h as vt}from"../chunks/BAfWTgf8.js";import{r as ft,s as _e,a as ge}from"../chunks/DJ6mOiO8.js";import{i as mt,a as yt,b as pt,c as ht}from"../chunks/CWTVokL9.js";function we(t,a,l){je(()=>{var d=Ye(()=>a(t,l?.())||{});if(l&&d?.update){var o=!1,v={};Ze(()=>{var i=l();$e(i),o&&et(v,i)&&(v=i,d.update(i))}),o=!0}if(d?.destroy)return()=>d.destroy()})}class bt{#e;#t;constructor(a,l){this.#e=a,this.#t=ot(l)}get current(){return this.#t(),this.#e()}}const xt=/\(.+\)/,_t=new Set(["all","print","screen","and","or","not","only"]);class gt extends bt{constructor(a,l){let d=xt.test(a)||a.split(/[\s,]+/).some(v=>_t.has(v.trim()))?a:`(${a})`;const o=window.matchMedia(d);super(()=>o.matches,v=>nt(o,"change",v))}}function wt(t){const a=JSON.parse(t);return a.data&&(a.data=pt(a.data,ht.decoders)),a}function le(t){return HTMLElement.prototype.cloneNode.call(t)}function kt(t,a=()=>{}){const l=async({action:o,result:v,reset:i=!0,invalidateAll:m=!0})=>{v.type==="success"&&(i&&HTMLFormElement.prototype.reset.call(t),m&&await mt()),(location.origin+location.pathname===o.origin+o.pathname||v.type==="redirect"||v.type==="error")&&await yt(v)};async function d(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:le(t).method)!=="post")return;o.preventDefault();const i=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:le(t).action),m=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:le(t).enctype,k=new FormData(t,o.submitter),D=new AbortController;let F=!1;const H=await a({action:i,cancel:()=>F=!0,controller:D,formData:k,formElement:t,submitter:o.submitter})??l;if(F)return;let _;try{const p=new Headers({accept:"application/json","x-sveltekit-action":"true"});m!=="multipart/form-data"&&p.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(m)?m:"application/x-www-form-urlencoded");const C=m==="multipart/form-data"?k:new URLSearchParams(k),j=await fetch(i,{method:"POST",headers:p,cache:"no-store",body:C,signal:D.signal});_=wt(await j.text()),_.type==="error"&&(_.status=j.status)}catch(p){if(p?.name==="AbortError")return;_={type:"error",error:p}}await H({action:i,formData:k,formElement:t,update:p=>l({action:i,result:_,reset:p?.reset,invalidateAll:p?.invalidateAll}),result:_})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",d),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",d)}}}var ke="mz3PUW_p",Ae=["#FFC700","#FF0000","#2E3191","#41BBC7"],ze=3500,Pe=.5,Se=150,Ee="mix",We=12,Le="",Me=!0,Ue=800,He=1600;function At(t,a={}){let{colors:l=Ae,duration:d=ze,force:o=Pe,particleCount:v=Se,particleShape:i=Ee,particleSize:m=We,particleClass:k=Le,destroyAfterDone:D=Me,stageHeight:F=Ue,stageWidth:N=He}=a;(function(c){if(document.querySelector("style[data-neoconfetti]"))return;const f=de("style");f.dataset.neoconfetti="",f.textContent=c,ue(document.head,f)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",F+"px");let H=[],_=[];const p=()=>Y(M()*(Wt-1)),C=(c,f)=>i!=="rectangles"&&(c==="circles"||Lt(f));function j(c,f){const E=p(),W=C(i,E),e=(y,b)=>c.style.setProperty(y,b+"");e("--xlp",ve(oe(Fe(f,90)-180),0,180,-N/2,N/2)+"px"),e("--dc",d-Y(1e3*M())+"ms");const s=M()<Pt?I(M()*St,2):0;e("--x1",s),e("--x2",-1*s),e("--x3",s),e("--x4",I(oe(ve(oe(Fe(f,90)-180),0,180,-1,1)),4)),e("--y1",I(M()*Te,4)),e("--y2",I(M()*o*(Oe()?1:-1),4)),e("--y3",Te),e("--y4",I(Et(ve(oe(f-180),0,180,o,-o),0),4)),e("--w",(W?m:Y(4*M())+m/2)+"px"),e("--h",(W?m:Y(2*M())+m)+"px");const n=E.toString(2).padStart(3,"0").split("");e("--hr",n.map((y=>+y/2+"")).join(" ")),e("--r",n.join(" ")),e("--rd",I(M()*(zt-Ce)+Ce)+"ms"),e("--br",W?"50%":0)}let O;function Z(){t.innerHTML="",clearTimeout(O),H=De(v,l),_=(function(c,f=[],E){const W=[];for(const{color:e}of f){const s=de("div");s.className=`${ke} ${E}`,s.style.setProperty("--bgc",e);const n=de("div");ue(s,n),ue(c,s),W.push(s)}return W})(t,H,k);for(const[c,f]of Ne(_))j(f,H[+c].degree);O=setTimeout((()=>{D&&(t.innerHTML="")}),d)}return Z(),{update(c){const f=c.particleCount??Se,E=c.particleShape??Ee,W=c.particleSize??We,e=c.particleClass??Le,s=c.colors??Ae,n=c.stageHeight??Ue,y=c.duration??ze,b=c.force??Pe,g=c.stageWidth??He,u=c.destroyAfterDone??Me;H=De(f,s);let P=!1;if(f===v){_=Array.from(t.querySelectorAll(`.${ke}`));for(const[S,{color:G}]of Ne(H)){const w=_[+S];JSON.stringify(l)!==JSON.stringify(s)&&w.style.setProperty("--bgc",G),E!==i&&w.style.setProperty("--br",C(E,p())?"50%":"0"),e!==k&&(k&&w.classList.remove(k),e&&w.classList.add(e))}}else P=!0;D&&!u&&clearTimeout(O),t.style.setProperty("--sh",n+"px"),d=y,l=s,o=b,v=f,i=E,m=W,k=e,D=u,F=n,N=g,P&&Z()},destroy(){t.innerHTML="",clearTimeout(O)}}}var Ce=200,zt=800,Pt=.1,St=.3,Te=.5,oe=Math.abs,M=Math.random,Y=Math.round,Et=Math.max,de=t=>document.createElement(t),ue=(t,a)=>t.appendChild(a),De=(t,a)=>Array.from({length:t},((l,d)=>({color:a[d%a.length],degree:360*d/t}))),I=(t,a=2)=>Y((t+Number.EPSILON)*10**a)/10**a,ve=(t,a,l,d,o)=>(t-a)*(o-d)/(l-a)+d,Fe=(t,a)=>t+a>360?t+a-360:t+a,Oe=()=>M()>.5,Ne=Object.entries,Wt=6,Lt=t=>t!==1&&Oe(),Mt=U('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),Ut=U('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),Ht=U('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),Ct=U('<p class="svelte-115oxdy"> </p>'),Tt=U('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),Dt=U('<button formaction="?/update" name="key"> </button>'),Ft=U('<div class="row svelte-115oxdy"></div>'),Nt=U('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),jt=U('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Ot=U('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function Vt(t,a){tt(a,!0);let l=lt(a,"form",15);const d=new gt("(prefers-reduced-motion: reduce)");let o=x(()=>a.data.answers.at(-1)==="xxxxx"),v=x(()=>r(o)?-1:a.data.answers.length),i=x(()=>a.data.guesses[r(v)]||""),m=x(()=>r(i).length===5);const k=x(()=>{let e={},s={};return a.data.answers.forEach((n,y)=>{const b=a.data.guesses[y];for(let g=0;g<5;g+=1){const u=b[g];n[g]==="x"?(e[u]="exact",s[u]="correct"):e[u]||(e[u]=n[g]==="c"?"close":"missing",s[u]=n[g]==="c"?"present":"absent")}}),{classnames:e,description:s}}),D=x(()=>r(k).classnames),F=x(()=>r(k).description);function N(e){e.preventDefault();const s=e.target.getAttribute("data-key");s==="backspace"?(xe(i,r(i).slice(0,-1)),l()?.badGuess&&l(l().badGuess=!1,!0)):r(i).length<5&&xe(i,r(i)+s)}function H(e){e.metaKey||e.key==="Enter"&&!r(m)||document.querySelector(`[data-key="${e.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var _=Ot();ct("keydown",rt,H),vt("115oxdy",e=>{var s=Mt();je(()=>{st.title="Sverdle"}),h(e,s)});var p=L(Q(_),2),C=L(T(p),2);let j;se(C,20,()=>Array.from(Array(6).keys()),e=>e,(e,s)=>{const n=x(()=>s===r(v));var y=Ht(),b=Q(y),g=T(b);z(b);var u=L(b,2);let P;se(u,20,()=>Array.from(Array(5).keys()),S=>S,(S,G)=>{const w=x(()=>r(n)?r(i):a.data.guesses[s]),A=x(()=>a.data.answers[s]?.[G]),$=x(()=>r(w)?.[G]??""),Ge=x(()=>r(n)&&G===r(w).length),fe=x(()=>r(A)==="x"),me=x(()=>r(A)==="c"),ye=x(()=>r(A)==="_");var ee=Ut();let pe;var he=T(ee),ne=L(he),qe=T(ne);{var Be=B=>{var te=re("(correct)");h(B,te)},Je=B=>{var te=be(),Ke=Q(te);{var Re=J=>{var ae=re("(present)");h(J,ae)},Ie=J=>{var ae=be(),Qe=Q(ae);{var Ve=K=>{var ce=re("(absent)");h(K,ce)},Xe=K=>{var ce=re("empty");h(K,ce)};R(Qe,K=>{r(ye)?K(Ve):K(Xe,!1)},!0)}h(J,ae)};R(Ke,J=>{r(me)?J(Re):J(Ie,!1)},!0)}h(B,te)};R(qe,B=>{r(fe)?B(Be):B(Je,!1)})}z(ne);var ie=L(ne,2);ft(ie),z(ee),q(()=>{pe=X(ee,1,"letter svelte-115oxdy",null,pe,{exact:r(fe),close:r(me),missing:r(ye),selected:r(Ge)}),V(he,`${r($)??""} `),ie.disabled=!r(n),_e(ie,r($))}),h(S,ee)}),z(u),q(()=>{V(g,`Row ${s+1}`),P=X(u,1,"row svelte-115oxdy",null,P,{current:r(n)})}),h(e,y)}),z(C);var O=L(C,2),Z=T(O);{var c=e=>{var s=Tt(),n=Q(s);{var y=u=>{var P=Ct(),S=T(P);z(P),q(()=>V(S,`the answer was "${a.data.answer??""}"`)),h(u,P)};R(n,u=>{!r(o)&&a.data.answer&&u(y)})}var b=L(n,2),g=T(b);z(b),q(()=>V(g,`${r(o)?"you won :)":"game over :("} play again?`)),h(e,s)},f=e=>{var s=Nt(),n=T(s);let y;var b=L(n,2);b.__click=N;var g=L(b,2);se(g,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],u=>u,(u,P)=>{var S=Ft();se(S,21,()=>P,dt,(G,w)=>{var A=Dt();A.__click=N;var $=T(A,!0);z(A),q(()=>{ge(A,"data-key",r(w)),X(A,1,ut(r(D)[r(w)]),"svelte-115oxdy"),A.disabled=r(m),_e(A,r(w)),ge(A,"aria-label",`${r(w)??""} ${(r(F)[r(w)]||"")??""}`),V($,r(w))}),h(G,A)}),z(S),h(u,S)}),z(s),q(()=>{n.disabled=!r(m),y=X(n,1,"svelte-115oxdy",null,y,{selected:r(m)})}),h(e,s)};R(Z,e=>{r(o)||a.data.answers.length>=6?e(c):e(f,!1)})}z(O),z(p),we(p,(e,s)=>kt?.(e,s),()=>()=>({update:e})=>{e({reset:!1})});var E=L(p,2);{var W=e=>{var s=jt();we(s,(n,y)=>At?.(n,y),()=>({particleCount:d.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),h(e,s)};R(E,e=>{r(o)&&e(W)})}q(()=>j=X(C,1,"grid svelte-115oxdy",null,j,{playing:!r(o),"bad-guess":l()?.badGuess})),h(t,_),at()}it(["click"]);export{Vt as component};
