import"../chunks/DsnmJJEf.js";import{z as Xe,x as U,I as M,A as Q,B as q,y as h,D as Ye,af as Ze,e as $e,$ as et,F as C,G as z,j as t,ad as x,ae as re,ac as be,O as xe}from"../chunks/DOgSbcbg.js";import{c as tt,b as at,d as rt,e as st,s as V}from"../chunks/2vdypKVU.js";import{p as ot,i as I}from"../chunks/BEAtf5qf.js";import{e as se,s as X,r as nt,a as _e,i as it,b as ge,c as ct}from"../chunks/D3Vw-xYP.js";import{h as lt}from"../chunks/CtbTnSvE.js";import{a as we}from"../chunks/CK44ZI5R.js";import{i as dt,a as ut,b as vt,c as mt}from"../chunks/BtS50mV2.js";class ft{#e;#t;constructor(r,u){this.#e=r,this.#t=tt(u)}get current(){return this.#t(),this.#e()}}const yt=/\(.+\)/,pt=new Set(["all","print","screen","and","or","not","only"]);class ht extends ft{constructor(r,u){let f=yt.test(r)||r.split(/[\s,]+/).some(y=>pt.has(y.trim()))?r:`(${r})`;const o=window.matchMedia(f);super(()=>o.matches,y=>at(o,"change",y))}}function bt(a){const r=JSON.parse(a);return r.data&&(r.data=vt(r.data,mt.decoders)),r}function le(a){return HTMLElement.prototype.cloneNode.call(a)}function xt(a,r=()=>{}){const u=async({action:o,result:y,reset:l=!0,invalidateAll:v=!0})=>{y.type==="success"&&(l&&HTMLFormElement.prototype.reset.call(a),v&&await dt()),(location.origin+location.pathname===o.origin+o.pathname||y.type==="redirect"||y.type==="error")&&await ut(y)};async function f(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:le(a).method)!=="post")return;o.preventDefault();const l=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:le(a).action),v=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:le(a).enctype,k=new FormData(a,o.submitter),F=new AbortController;let D=!1;const H=await r({action:l,cancel:()=>D=!0,controller:F,formData:k,formElement:a,submitter:o.submitter})??u;if(D)return;let _;try{const p=new Headers({accept:"application/json","x-sveltekit-action":"true"});v!=="multipart/form-data"&&p.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(v)?v:"application/x-www-form-urlencoded");const T=v==="multipart/form-data"?k:new URLSearchParams(k),O=await fetch(l,{method:"POST",headers:p,cache:"no-store",body:T,signal:F.signal});_=bt(await O.text()),_.type==="error"&&(_.status=O.status)}catch(p){if(p?.name==="AbortError")return;_={type:"error",error:p}}await H({action:l,formData:k,formElement:a,update:p=>u({action:l,result:_,reset:p?.reset,invalidateAll:p?.invalidateAll}),result:_})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",f),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",f)}}}var ke="mz3PUW_p",Ae=["#FFC700","#FF0000","#2E3191","#41BBC7"],ze=3500,Pe=.5,Se=150,Ee="mix",We=12,Me="",Le=!0,Ue=800,He=1600;function _t(a,r={}){let{colors:u=Ae,duration:f=ze,force:o=Pe,particleCount:y=Se,particleShape:l=Ee,particleSize:v=We,particleClass:k=Me,destroyAfterDone:F=Le,stageHeight:D=Ue,stageWidth:N=He}=r;(function(i){if(document.querySelector("style[data-neoconfetti]"))return;const d=de("style");d.dataset.neoconfetti="",d.textContent=i,ue(document.head,d)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),a.classList.add("mz3PUW_c"),a.style.setProperty("--sh",D+"px");let H=[],_=[];const p=()=>Y(L()*(zt-1)),T=(i,d)=>l!=="rectangles"&&(i==="circles"||Pt(d));function O(i,d){const E=p(),W=T(l,E),e=(m,b)=>i.style.setProperty(m,b+"");e("--xlp",ve(oe(De(d,90)-180),0,180,-N/2,N/2)+"px"),e("--dc",f-Y(1e3*L())+"ms");const s=L()<wt?K(L()*kt,2):0;e("--x1",s),e("--x2",-1*s),e("--x3",s),e("--x4",K(oe(ve(oe(De(d,90)-180),0,180,-1,1)),4)),e("--y1",K(L()*Ce,4)),e("--y2",K(L()*o*(Oe()?1:-1),4)),e("--y3",Ce),e("--y4",K(At(ve(oe(d-180),0,180,o,-o),0),4)),e("--w",(W?v:Y(4*L())+v/2)+"px"),e("--h",(W?v:Y(2*L())+v)+"px");const n=E.toString(2).padStart(3,"0").split("");e("--hr",n.map((m=>+m/2+"")).join(" ")),e("--r",n.join(" ")),e("--rd",K(L()*(gt-Te)+Te)+"ms"),e("--br",W?"50%":0)}let j;function Z(){a.innerHTML="",clearTimeout(j),H=Fe(y,u),_=(function(i,d=[],E){const W=[];for(const{color:e}of d){const s=de("div");s.className=`${ke} ${E}`,s.style.setProperty("--bgc",e);const n=de("div");ue(s,n),ue(i,s),W.push(s)}return W})(a,H,k);for(const[i,d]of Ne(_))O(d,H[+i].degree);j=setTimeout((()=>{F&&(a.innerHTML="")}),f)}return Z(),{update(i){const d=i.particleCount??Se,E=i.particleShape??Ee,W=i.particleSize??We,e=i.particleClass??Me,s=i.colors??Ae,n=i.stageHeight??Ue,m=i.duration??ze,b=i.force??Pe,g=i.stageWidth??He,c=i.destroyAfterDone??Le;H=Fe(d,s);let P=!1;if(d===y){_=Array.from(a.querySelectorAll(`.${ke}`));for(const[S,{color:G}]of Ne(H)){const w=_[+S];JSON.stringify(u)!==JSON.stringify(s)&&w.style.setProperty("--bgc",G),E!==l&&w.style.setProperty("--br",T(E,p())?"50%":"0"),e!==k&&(k&&w.classList.remove(k),e&&w.classList.add(e))}}else P=!0;F&&!c&&clearTimeout(j),a.style.setProperty("--sh",n+"px"),f=m,u=s,o=b,y=d,l=E,v=W,k=e,F=c,D=n,N=g,P&&Z()},destroy(){a.innerHTML="",clearTimeout(j)}}}var Te=200,gt=800,wt=.1,kt=.3,Ce=.5,oe=Math.abs,L=Math.random,Y=Math.round,At=Math.max,de=a=>document.createElement(a),ue=(a,r)=>a.appendChild(r),Fe=(a,r)=>Array.from({length:a},((u,f)=>({color:r[f%r.length],degree:360*f/a}))),K=(a,r=2)=>Y((a+Number.EPSILON)*10**r)/10**r,ve=(a,r,u,f,o)=>(a-r)*(o-f)/(u-r)+f,De=(a,r)=>a+r>360?a+r-360:a+r,Oe=()=>L()>.5,Ne=Object.entries,zt=6,Pt=a=>a!==1&&Oe(),St=U('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),Et=U('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),Wt=U('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),Mt=U('<p class="svelte-115oxdy"> </p>'),Lt=U('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),Ut=U('<button formaction="?/update" name="key"> </button>'),Ht=U('<div class="row svelte-115oxdy"></div>'),Tt=U('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),Ct=U('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Ft=U('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function Rt(a,r){Xe(r,!0);let u=ot(r,"form",15);const f=new ht("(prefers-reduced-motion: reduce)");let o=x(()=>r.data.answers.at(-1)==="xxxxx"),y=x(()=>t(o)?-1:r.data.answers.length),l=x(()=>r.data.guesses[t(y)]||""),v=x(()=>t(l).length===5);const k=x(()=>{let e={},s={};return r.data.answers.forEach((n,m)=>{const b=r.data.guesses[m];for(let g=0;g<5;g+=1){const c=b[g];n[g]==="x"?(e[c]="exact",s[c]="correct"):e[c]||(e[c]=n[g]==="c"?"close":"missing",s[c]=n[g]==="c"?"present":"absent")}}),{classnames:e,description:s}}),F=x(()=>t(k).classnames),D=x(()=>t(k).description);function N(e){e.preventDefault();const s=e.target.getAttribute("data-key");s==="backspace"?(xe(l,t(l).slice(0,-1)),u()?.badGuess&&u(u().badGuess=!1,!0)):t(l).length<5&&xe(l,t(l)+s)}function H(e){e.metaKey||e.key==="Enter"&&!t(v)||document.querySelector(`[data-key="${e.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var _=Ft();st("keydown",Ze,H),lt("115oxdy",e=>{var s=St();$e(()=>{et.title="Sverdle"}),h(e,s)});var p=M(Q(_),2),T=M(C(p),2);let O;se(T,20,()=>Array.from(Array(6).keys()),e=>e,(e,s)=>{const n=x(()=>s===t(y));var m=Wt(),b=Q(m),g=C(b);z(b);var c=M(b,2);let P;se(c,20,()=>Array.from(Array(5).keys()),S=>S,(S,G)=>{const w=x(()=>t(n)?t(l):r.data.guesses[s]),A=x(()=>r.data.answers[s]?.[G]),$=x(()=>t(w)?.[G]??""),je=x(()=>t(n)&&G===t(w).length),me=x(()=>t(A)==="x"),fe=x(()=>t(A)==="c"),ye=x(()=>t(A)==="_");var ee=Et();let pe;var he=C(ee),ne=M(he),Ge=C(ne);{var qe=B=>{var te=re("(correct)");h(B,te)},Be=B=>{var te=be(),Je=Q(te);{var Re=J=>{var ae=re("(present)");h(J,ae)},Ie=J=>{var ae=be(),Ke=Q(ae);{var Qe=R=>{var ce=re("(absent)");h(R,ce)},Ve=R=>{var ce=re("empty");h(R,ce)};I(Ke,R=>{t(ye)?R(Qe):R(Ve,!1)},!0)}h(J,ae)};I(Je,J=>{t(fe)?J(Re):J(Ie,!1)},!0)}h(B,te)};I(Ge,B=>{t(me)?B(qe):B(Be,!1)})}z(ne);var ie=M(ne,2);nt(ie),z(ee),q(()=>{pe=X(ee,1,"letter svelte-115oxdy",null,pe,{exact:t(me),close:t(fe),missing:t(ye),selected:t(je)}),V(he,`${t($)??""} `),ie.disabled=!t(n),_e(ie,t($))}),h(S,ee)}),z(c),q(()=>{V(g,`Row ${s+1}`),P=X(c,1,"row svelte-115oxdy",null,P,{current:t(n)})}),h(e,m)}),z(T);var j=M(T,2),Z=C(j);{var i=e=>{var s=Lt(),n=Q(s);{var m=c=>{var P=Mt(),S=C(P);z(P),q(()=>V(S,`the answer was "${r.data.answer??""}"`)),h(c,P)};I(n,c=>{!t(o)&&r.data.answer&&c(m)})}var b=M(n,2),g=C(b);z(b),q(()=>V(g,`${t(o)?"you won :)":"game over :("} play again?`)),h(e,s)},d=e=>{var s=Tt(),n=C(s);let m;var b=M(n,2);b.__click=N;var g=M(b,2);se(g,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],c=>c,(c,P)=>{var S=Ht();se(S,21,()=>P,it,(G,w)=>{var A=Ut();A.__click=N;var $=C(A,!0);z(A),q(()=>{ge(A,"data-key",t(w)),X(A,1,ct(t(F)[t(w)]),"svelte-115oxdy"),A.disabled=t(v),_e(A,t(w)),ge(A,"aria-label",`${t(w)??""} ${(t(D)[t(w)]||"")??""}`),V($,t(w))}),h(G,A)}),z(S),h(c,S)}),z(s),q(()=>{n.disabled=!t(v),m=X(n,1,"svelte-115oxdy",null,m,{selected:t(v)})}),h(e,s)};I(Z,e=>{t(o)||r.data.answers.length>=6?e(i):e(d,!1)})}z(j),z(p),we(p,(e,s)=>xt?.(e,s),()=>()=>({update:e})=>{e({reset:!1})});var E=M(p,2);{var W=e=>{var s=Ct();we(s,(n,m)=>_t?.(n,m),()=>({particleCount:f.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),h(e,s)};I(E,e=>{t(o)&&e(W)})}q(()=>O=X(T,1,"grid svelte-115oxdy",null,O,{playing:!t(o),"bad-guess":u()?.badGuess})),h(a,_),Ye()}rt(["click"]);export{Rt as component};
