import"../chunks/DsnmJJEf.js";import{bc as qe,b as Ke,h as Ze,j as Qe,ab as Xe,bd as U,a0 as f,l as c,Z as le,k as b,a2 as n,a3 as a,a4 as v,a1 as ie,aq as $,F as Me,V as $e,v as l,x,as as Fe,_ as me,aP as Oe,e as Ye,$ as et,be as Ne}from"../chunks/ROreMvCu.js";import{B as tt,d as ee,a as p,k as rt,l as at}from"../chunks/B_y0czwZ.js";import{p as E,i as A,s as ot,a as st}from"../chunks/DMEaXNxq.js";import{s as W,c as H,e as be,i as ye}from"../chunks/EMW814bC.js";import{h as nt}from"../chunks/DdtJfVwf.js";import{b as lt}from"../chunks/DT4A4sad.js";import"../chunks/Cr5b-aTs.js";import{h as je,$ as it,t as F,a as ct,s as Se}from"../chunks/CK0RiTzv.js";function dt(r,t,e){Ze&&Qe();var o=new tt(r),_=!qe();Ke(()=>{var i=t();_&&i!==null&&typeof i=="object"&&(i={}),o.ensure(i,e)})}function vt(r,t){var e=r.$$events?.[t.type],o=Xe(e)?e.slice():e==null?[]:[e];for(var _ of o)_.call(this,t)}const ft=!0,ir=Object.freeze(Object.defineProperty({__proto__:null,prerender:ft},Symbol.toStringTag,{value:"Module"})),Z="/api";async function Ie(r=""){const t=await fetch(`${Z}/objects?prefix=${encodeURIComponent(r)}`);if(!t.ok)throw new Error("Failed to fetch objects");return await t.json()}async function ut(r){if(!(await fetch(`${Z}/folders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r})})).ok)throw new Error("Failed to create folder")}async function ht(r,t){const e=new FormData;e.append("prefix",r);for(const _ of t)e.append("files",_);if(!(await fetch(`${Z}/files/upload`,{method:"POST",body:e})).ok)throw new Error("Failed to upload files")}async function gt(r,t){if(!(await fetch(`${Z}/objects/rename`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldPath:r,newPath:t})})).ok)throw new Error("Failed to rename object")}async function pt(r){if(!(await fetch(`${Z}/objects`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r})})).ok)throw new Error("Failed to delete object")}async function _t(r){const t=await fetch(`${Z}/folders/contents?path=${encodeURIComponent(r)}`);if(!t.ok)throw new Error("Failed to get folder contents");return await t.json()}async function mt(r){if(!(await fetch(`${Z}/folders/recursive`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r})})).ok)throw new Error("Failed to delete folder")}var bt=U('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>');function yt(r,t){let e=E(t,"className",8,"");var o=bt();f(()=>W(o,0,H(e()))),c(r,o)}var wt=b('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6"><h2 class="text-xl font-bold mb-4"> </h2> <p class="mb-6"> </p> <div class="flex justify-end space-x-2"><button class="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600"> </button> <button class="px-4 py-2 rounded bg-red-500 hover:bg-red-600 text-white"> </button></div></div>');function Ee(r,t){le(t,!0);let e=E(t,"buttonTextConfirm",3,"Confirm"),o=E(t,"buttonTextCancel",3,"Cancel");function _(){t.onConfirm(),je()}var i=wt(),m=n(i),k=n(m,!0);a(m);var y=v(m,2),C=n(y,!0);a(y);var u=v(y,2),h=n(u);h.__click=function(...B){je?.apply(this,B)};var O=n(h,!0);a(h);var I=v(h,2);I.__click=_;var V=n(I,!0);a(I),a(u),a(i),f(()=>{p(k,t.title),p(C,t.body),p(O,o()),p(V,e())}),c(r,i),ie()}ee(["click"]);var xt=U('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>');function kt(r,t){let e=E(t,"className",8,"");var o=xt();f(()=>W(o,0,H(e()))),c(r,o)}var Ct=U('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line></svg>');function Ft(r,t){let e=E(t,"className",8,"");var o=Ct();f(()=>W(o,0,H(e()))),c(r,o)}var Nt=U('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>');function jt(r,t){let e=E(t,"className",8,"");var o=Nt();f(()=>W(o,0,H(e()))),c(r,o)}var St=U('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>');function Et(r,t){let e=E(t,"className",8,"");var o=St();f(()=>W(o,0,H(e()))),c(r,o)}var Tt=U('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>');function Mt(r,t){let e=E(t,"className",8,"");var o=Tt();f(()=>W(o,0,H(e()))),c(r,o)}var $t=U('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>');function Te(r,t){let e=E(t,"className",8,"");var o=$t();f(()=>W(o,0,H(e()))),c(r,o)}var Ot=b('<button class="text-left w-full hover:bg-gray-100 dark:hover:bg-gray-800 p-1 rounded flex items-center"><span class="mr-2"> </span> <!> </button>'),It=b("<p>Loading...</p>"),Bt=b('<button class="text-left w-full p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded flex items-center"><!> </button>'),Dt=b('<div class="pl-4"><!></div>'),Pt=b("<div><!> <!></div>");function Be(r,t){le(t,!0);let e=E(t,"path",3,"/");const o=rt();let _=$(Me([])),i=$(e()==="/"),m=$(!1);async function k(){if(l(i)){x(m,!0);try{x(_,await Ie(e()),!0)}finally{x(m,!1)}}}function y(){x(i,!l(i)),l(i)&&k(),o("folderclick",e())}$e(()=>{l(i)&&k()});function C(g){return g.endsWith(".yaml")||g.endsWith(".yml")?Mt:g.endsWith(".csv")||g.endsWith(".xlsx")?Te:g.endsWith(".txt")?Et:jt}var u=Pt();let h;var O=n(u);{var I=g=>{var N=Ot();N.__click=y;var J=n(N),X=n(J,!0);a(J);var Q=v(J,2);{var j=w=>{Ft(w,{className:"w-5 h-5 mr-2"})},T=w=>{kt(w,{className:"w-5 h-5 mr-2"})};A(Q,w=>{l(i)?w(j):w(T,!1)})}var G=v(Q);a(N),f(w=>{p(X,l(i)?"▼":"►"),p(G,` ${w??""}`)},[()=>e().split("/").slice(-2,-1)[0]]),c(g,N)};A(O,g=>{e()!=="/"&&g(I)})}var V=v(O,2);{var B=g=>{var N=Dt(),J=n(N);{var X=j=>{var T=It();c(j,T)},Q=j=>{var T=Fe(),G=me(T);be(G,17,()=>l(_),ye,(w,q)=>{var te=Fe(),re=me(te);{var ce=z=>{Be(z,{get path(){return l(q).fullName},get onFileSelect(){return t.onFileSelect},$$events:{folderclick(D){vt.call(this,t,D)}}})},de=z=>{var D=Bt();D.__click=()=>t.onFileSelect(l(q).fullName);var Y=n(D);at(Y,()=>C(l(q).name),()=>({className:"w-5 h-5 mr-2"}));var ae=v(Y);a(D),f(()=>p(ae,` ${l(q).name??""}`)),c(z,D)};A(re,z=>{l(q).isFolder?z(ce):z(de,!1)})}c(w,te)}),c(j,T)};A(J,j=>{l(m)?j(X):j(Q,!1)})}a(N),c(g,N)};A(V,g=>{l(i)&&g(B)})}a(u),f(()=>h=W(u,1,"",null,h,{"ml-4":e()!=="/"})),c(r,u),ie()}ee(["click"]);var Lt=b('<div class="h-full flex flex-col"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-bold"> </h3> <div class="flex space-x-2"><button class="px-4 py-2 rounded bg-green-500 hover:bg-green-600 text-white">Save</button> <button class="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600">Close File</button></div></div> <div class="flex-grow h-full border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden"></div></div>');function At(r,t){async function e(){}var o=Lt(),_=n(o),i=n(_),m=n(i,!0);a(i);var k=v(i,2),y=n(k);y.__click=e;var C=v(y,2);C.__click=function(...u){t.close?.apply(this,u)},a(k),a(_),Oe(2),a(o),f(()=>p(m,t.filePath)),c(r,o)}ee(["click"]);var Wt=U('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A11.953 11.953 0 0 1 12 16.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 0 3 12c0 .778.099 1.533.284 2.253m0 0"></path></svg>');function Vt(r,t){let e=E(t,"className",8,"w-6 h-6");var o=Wt();f(()=>W(o,0,H(e()))),c(r,o)}var zt=b('<li><button class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700"> </button></li>'),Rt=b('<div class="absolute bottom-full mb-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg"><ul></ul></div>'),Ut=b('<div class="relative"><button class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"><!></button> <!></div>');function Ht(r,t){le(t,!0);let e=$(!1);const o=[{code:"en",name:"English"},{code:"fr",name:"Français"},{code:"es",name:"Español"},{code:"de",name:"Deutsch"}];function _(u){it.set(u),x(e,!1)}var i=Ut(),m=n(i);m.__click=()=>x(e,!l(e));var k=n(m);Vt(k,{className:"w-6 h-6"}),a(m);var y=v(m,2);{var C=u=>{var h=Rt(),O=n(h);be(O,21,()=>o,ye,(I,V)=>{var B=zt(),g=n(B);g.__click=()=>_(l(V).code);var N=n(g,!0);a(g),a(B),f(()=>p(N,l(V).name)),c(I,B)}),a(O),a(h),c(u,h)};A(y,u=>{l(e)&&u(C)})}a(i),c(r,i),ie()}ee(["click"]);var Jt=b("<p> </p>"),Gt=b('<button class="px-2 py-1 text-sm rounded bg-red-500 hover:bg-red-600 text-white"> </button>'),qt=b('<button class="px-2 py-1 text-sm rounded bg-red-500 hover:bg-red-600 text-white"> </button>'),Kt=b('<div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col justify-between"><h3 class="text-lg font-bold mb-2 truncate"> </h3> <div class="flex justify-end space-x-2"><button class="px-2 py-1 text-sm rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600"> </button> <!></div></div>'),Zt=b('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>'),Qt=b('<div class="flex justify-between items-center mb-4"><h2 class="text-2xl font-bold"> </h2> <div class="flex space-x-2"><button class="px-4 py-2 rounded bg-blue-500 hover:bg-blue-600 text-white"> </button> <input type="file" multiple class="hidden"/> <button class="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600"> </button></div></div> <!>',1),Xt=b('<div class="h-screen w-screen flex flex-col bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100"><header class="p-4 border-b border-gray-200 dark:border-gray-700 flex items-center"><img src="/logo-mys3client.png" alt="MyS3 Client Logo" class="h-12"/></header> <div class="flex flex-grow overflow-hidden"><div class="w-1/4 border-r border-gray-200 dark:border-gray-700 p-4 overflow-y-auto"><h2 class="text-2xl font-bold mb-4"> </h2> <!></div> <div class="w-3/4 p-4 overflow-y-auto"><!></div></div> <footer class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center"><!> <a href="https://github.com/gaumondp/mys3-client/" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center hover:text-blue-500"><!> <span> </span></a> <div></div></footer></div>');function cr(r,t){le(t,!0);const e=()=>st(ct,"$_",o),[o,_]=ot();let i=$("/"),m=$(Me([])),k=$(!0),y=$(void 0),C=$(null),u=$(0);async function h(s){x(k,!0),x(C,null);try{x(m,await Ie(s),!0)}catch{F.error(e()("toasts.fetch_objects_error"))}finally{x(k,!1)}}$e(()=>{h(l(i))});function O(s){[".txt",".json",".md",".js",".html",".yml",".yaml"].some(S=>s.endsWith(S))?x(C,s,!0):F.info(e()("toasts.not_editable_error"))}async function I(){const s=prompt(e()("toasts.create_folder_prompt"));if(s){const d=l(i)+s+"/";try{await ut(d),F.success(e()("toasts.create_folder_success")),h(l(i))}catch{F.error(e()("toasts.create_folder_error"))}}}async function V(s){try{const{fileCount:d,folderCount:S}=await _t(s.fullName);Se(Ee,{title:e()("confirm_delete.erase_folder_title"),body:e()("confirm_delete.erase_folder_body",{values:{folderName:s.name,fileCount:d,folderCount:S}}),buttonTextConfirm:e()("confirm_delete.confirm"),onConfirm:()=>B(s)})}catch{F.error(e()("toasts.get_folder_contents_error"))}}async function B(s){try{await mt(s.fullName),F.success(e()("toasts.delete_folder_success")),h(l(i)),Ne(u)}catch{F.error(e()("toasts.delete_folder_error"))}}async function g(s){const d=s.target;if(d.files)try{await ht(l(i),d.files),F.success(e()("toasts.upload_files_success")),h(l(i))}catch{F.error(e()("toasts.upload_files_error"))}}function N(s){Se(Ee,{title:e()("confirm_delete.erase_file_title"),body:e()("confirm_delete.erase_file_body",{values:{fileName:s.name}}),buttonTextConfirm:e()("confirm_delete.confirm"),onConfirm:()=>J(s)})}async function J(s){try{await pt(s.fullName),F.success(e()("toasts.delete_object_success")),h(l(i)),Ne(u)}catch{F.error(e()("toasts.delete_object_error"))}}async function X(s){const d=prompt(e()("toasts.rename_object_prompt"),s.name);if(d&&d!==s.name){const S=s.fullName.replace(s.name,d);try{await gt(s.fullName,S),F.success(e()("toasts.rename_object_success")),h(l(i))}catch{F.error(e()("toasts.rename_object_error"))}}}function Q(s){const d=s.detail;x(C,null),x(i,d,!0),h(d)}var j=Xt();nt("1uha8ag",s=>{Ye(()=>{et.title="MyS3 Client"})});var T=v(n(j),2),G=n(T),w=n(G),q=n(w,!0);a(w);var te=v(w,2);dt(te,()=>l(u),s=>{Be(s,{onFileSelect:O,$$events:{folderclick:Q}})}),a(G);var re=v(G,2),ce=n(re);{var de=s=>{At(s,{get filePath(){return l(C)}})},z=s=>{var d=Qt(),S=me(d),oe=n(S),Pe=n(oe,!0);a(oe);var ke=v(oe,2),se=n(ke);se.__click=()=>l(y).click();var Le=n(se,!0);a(se);var ve=v(se,2);ve.__change=g,lt(ve,M=>x(y,M),()=>l(y));var fe=v(ve,2);fe.__click=I;var Ae=n(fe,!0);a(fe),a(ke),a(S);var We=v(S,2);{var Ve=M=>{var P=Jt(),ue=n(P,!0);a(P),f(K=>p(ue,K),[()=>e()("page.loading")]),c(M,P)},ze=M=>{var P=Zt();be(P,21,()=>l(m),ye,(ue,K)=>{var he=Kt(),ge=n(he),Re=n(ge,!0);a(ge);var Ce=v(ge,2),ne=n(Ce);ne.__click=()=>X(l(K));var Ue=n(ne,!0);a(ne);var He=v(ne,2);{var Je=R=>{var L=Gt();L.__click=()=>V(l(K));var pe=n(L,!0);a(L),f(_e=>p(pe,_e),[()=>e()("page.delete_folder")]),c(R,L)},Ge=R=>{var L=qt();L.__click=()=>N(l(K));var pe=n(L,!0);a(L),f(_e=>p(pe,_e),[()=>e()("page.delete_file")]),c(R,L)};A(He,R=>{l(K).isFolder?R(Je):R(Ge,!1)})}a(Ce),a(he),f(R=>{p(Re,l(K).name),p(Ue,R)},[()=>e()("page.rename")]),c(ue,he)}),a(P),c(M,P)};A(We,M=>{l(k)?M(Ve):M(ze,!1)})}f((M,P)=>{p(Pe,l(i)),p(Le,M),p(Ae,P)},[()=>e()("page.upload"),()=>e()("page.new_folder")]),c(s,d)};A(ce,s=>{l(C)?s(de):s(z,!1)})}a(re),a(T);var D=v(T,2),Y=n(D);Ht(Y,{});var ae=v(Y,2),we=n(ae);yt(we,{className:"w-5 h-5 mr-2"});var xe=v(we,2),De=n(xe,!0);a(xe),a(ae),Oe(2),a(D),a(j),f((s,d)=>{p(q,s),p(De,d)},[()=>e()("page.files"),()=>e()("page.view_source")]),c(r,j),ie(),_()}ee(["click","change"]);export{cr as component,ir as universal};
